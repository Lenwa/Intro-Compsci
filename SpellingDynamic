import java.io.File;
import javax.swing.JOptionPane;
import javax.swing.ImageIcon;
import java.util.Random;
import java.util.ArrayList;

public class SpellingDynamic {
    
    public static void main(String[] args) {        
        
        File folder = new File("C:\\Users\\Kyle\\Desktop\\Programs\\Images");     
        File[] listOfFiles = folder.listFiles();       
        ArrayList<String> imgNames = new ArrayList<>();
        ArrayList<String> previous = new ArrayList<>();        
        Object answer;        
        String timePlay;        
        int count = 0, score = 0;        
        int timeP1 = 0;
        Random rand = new Random();
        for (File listOfFile : listOfFiles) {
            imgNames.add(listOfFile.getName());
        } 
        int numChoice = imgNames.size();         
        try{
            timePlay = JOptionPane.showInputDialog(null, "How many times " 
            + "would you like to play the spelling game?");
            //handles nullpointerexception
            if(timePlay == null){
                JOptionPane.showMessageDialog(null, "Goodbye!");
                System.exit(0);
            }
            else{
                timeP1 = Integer.parseInt(timePlay);
            }
         }
         catch(NumberFormatException e){
            JOptionPane.showMessageDialog(null, "Invalid input, setting number "
                    + "of questions to the maximum", 
            "Oops", JOptionPane.WARNING_MESSAGE);
            timeP1 = numChoice;
        }
        if(timeP1 > numChoice){
            timeP1 = numChoice;
        }      
        if(timeP1 < 0){
            JOptionPane.showMessageDialog(null, "Can't except negative numbers "
                    + ", setting number of questions to: " + numChoice,                
                    "Whoops", JOptionPane.WARNING_MESSAGE);
            timeP1 = numChoice;
        }   
        while(count < timeP1){                
                count++;        
            int choice = rand.nextInt(numChoice);
            String spellingWord = imgNames.get(choice);      
            boolean check = previous.contains(spellingWord);
            previous.add(spellingWord);       
            if(check){
                count--;
            }
            else{			
                String word = spellingWord.substring(0, spellingWord.indexOf('.'));		
                answer = JOptionPane.showInputDialog(null, "Enter what you see", 
                "Question " + count + " out of" + timeP1, 
                JOptionPane.PLAIN_MESSAGE, 
                new ImageIcon("C:\\Users\\Kyle\\Desktop\\Programs\\Images\\" + 
                spellingWord), null, "Enter your answer here");                
                if(answer == null){ 
                    JOptionPane.showMessageDialog(null, "Thanks for playing! "
                    + "You spelled " +
                    + score + " out of " + count + " words correctly!");
                    System.exit(0);
                    }
                else{
                if(answer.toString().toLowerCase().equals(word)){
                    score++;
                    JOptionPane.showMessageDialog(null, "Great job, "
                        + "that's correct", "Great job!", 
                        JOptionPane.PLAIN_MESSAGE,
                        new ImageIcon("C:\\Users\\Kyle\\Desktop\\Programs\\Icons"
                                + "\\clapping.gif"));
                    }			
                else{
                    JOptionPane.showMessageDialog(null, 
                    "Sorry that's incorrect.\n The correct word is:\n " + word, 
                    "Oops", JOptionPane.PLAIN_MESSAGE,
                    new ImageIcon("C:\\Users\\Kyle\\Desktop\\Programs\\"
                            + "Icons\\no.gif"));
                    }   
                }
            }
        }
       JOptionPane.showMessageDialog(null, "Thanks for playing!\n"
               + "You spelled " +
           + score + " out of " + timeP1 + " words correctly!", 
           "Thanks for playing!", JOptionPane.PLAIN_MESSAGE,
           new ImageIcon("C:/Users/Kyle/Desktop/Programs/Icons/fireworks.gif"));
    
}
}
