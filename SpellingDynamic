import java.io.*;
import javax.swing.*;
import java.util.*;

public class SpellingDynamic {
    
    public static void main(String[] args) {
        
        File folder = new File("C:\\Users\\Kyle\\Desktop\\Programs\\Images");
        File[] listOfFiles = folder.listFiles();
        ArrayList<String> imgNames = new ArrayList<>();
        Object answer;
        String timePlay = null;
        for (File listOfFile : listOfFiles) {
            String in = listOfFile.getName();
            imgNames.add(in);
        }
        int numChoice = imgNames.size();
        int count = 0, score = 0;       
        timePlay = JOptionPane.showInputDialog(null, "How many times " 
        + "would you like to play the spelling game?");
        int timeP1 = Integer.parseInt(timePlay);
        if(timeP1 > numChoice){
            timeP1 = numChoice;
        }
        if(timePlay == null){
            JOptionPane.showMessageDialog(null, "Goodbye!");
            System.exit(0);
        }      
        if(timeP1 < 0){
            JOptionPane.showMessageDialog(null, "Can't except negative numbers "
                    + ", setting number of questions to: " + numChoice,                
                    "Whoops", JOptionPane.WARNING_MESSAGE);
            timeP1 = numChoice;
        }   
        ArrayList<String> previous = new ArrayList<>();
        while(count < timeP1){
                count++;
        Random rand = new Random();       
        int choice = rand.nextInt(numChoice);
        String spellingWord = imgNames.get(choice);      
        boolean check = previous.contains(spellingWord);
        previous.add(spellingWord);
        if(check == true){
            count--;
            continue;
        }
        String word = spellingWord.substring(0, spellingWord.indexOf('.'));
        answer = JOptionPane.showInputDialog(null, "Enter what you see", 
        "Your score is: " + score + " out of" + timeP1, 
        JOptionPane.PLAIN_MESSAGE, 
        new ImageIcon("C:\\Users\\Kyle\\Desktop\\Programs\\Images\\" + 
                word + ".jpg"), 
        null, "Enter your answer here");
        if(answer == null){
            JOptionPane.showMessageDialog(null, "Goodbye!");
            System.exit(0);
        }
        if(answer.equals(word)){
            score++;
            JOptionPane.showMessageDialog(null, "Great job, that's correct");
        }
        else{
            JOptionPane.showMessageDialog(null, "Sorry that's incorrect, "
                      + "the correct word is " + word);
        }       
        }        
        JOptionPane.showMessageDialog(null, "Thanks for playing! You spelled " +
           + score + " out of " + timePlay + " words correctly!");
    }
}
